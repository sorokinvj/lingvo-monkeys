# Технический контекст Lingvo Monkeys

## Используемые технологии

### Фронтенд

- **Next.js** - основной фреймворк для разработки веб-приложения
- **React** - библиотека для построения пользовательского интерфейса
- **TypeScript** - типизированный JavaScript для повышения надежности кода
- **Tailwind CSS** - утилитарный CSS-фреймворк для стилизации компонентов
- **Shadcn UI** - библиотека компонентов (судя по структуре ui-компонентов)

### Бэкенд

- **Next.js API Routes** - серверные эндпоинты для обработки запросов
- **Supabase** - платформа, предоставляющая БД, аутентификацию и хранилище
- **PostgreSQL** - реляционная база данных (предоставляется Supabase)

### Хранение данных

- **Supabase Storage** - облачное хранилище для медиа-файлов
- **Supabase Auth** - система аутентификации пользователей
- **Row Level Security (RLS)** - механизм контроля доступа на уровне строк в PostgreSQL

### Инфраструктура

- **Vercel** - платформа для деплоя Next.js приложений (предполагается по наличию vercel.json)

## Настройка разработки

### Зависимости проекта

- Node.js (текущая стабильная версия)
- Пакетный менеджер npm/yarn (yarn.lock присутствует)
- Git для управления версиями

### Структура проекта

- App Router (новая структура Next.js с директорией app/)
- Группировка маршрутов по типу макета ((withFooter)/(noFooter))
- Компоненты в директории components/
- UI компоненты в components/ui/
- Специфичные страничные компоненты в components/LandingPage/ и других директориях
- Хуки в директории hooks/
- Утилиты в директории utils/
- Конфигурации в директории config/

### Среда разработки

- Использование .env.local для локальных переменных окружения
- .env.example для документирования необходимых переменных
- .prettierrc для стандартизации форматирования кода
- TypeScript для статической типизации (tsconfig.json)

## Технические ограничения

### Обработка видео

- Ограничение на размер загружаемых файлов (определяется в настройках Supabase)
- Длительность обработки транскрипций зависит от длины видео

### База данных

- Ограничения на объем хранимых данных согласно плану Supabase
- Ограничения на количество соединений и нагрузку на БД

## Зависимости

### Внешние зависимости

- Суперабас для хранения данных и аутентификации
- Вероятно, внешний API для транскрибации видео (детали требуют уточнения)

### Внутренние зависимости

- hooks/useAnalytics.ts для отслеживания действий пользователей
- hooks/useCollection.ts для работы с коллекциями
- hooks/useFiles.ts для работы с файлами
- hooks/useUser.ts для работы с данными пользователя
- lib/api.ts для взаимодействия с API
- utils для общих утилит

## Шаблоны использования инструментов

### Сбор аналитики

- Таблицы UserAction, UserSession, FilePlaybackStats для хранения аналитических данных
- Хуки useTrackAction, usePageTracking для отслеживания действий
- API-маршруты /api/analytics/\* для работы с данными аналитики

### Управление аутентификацией

- Использование Supabase Auth для управления пользователями
- Компоненты signin-form.tsx, signup-form.tsx для форм аутентификации
- Middleware.ts для проверки аутентификации на маршрутах

### Управление транскрипциями

- API обратного вызова для обработки завершенных транскрипций
- Хранение метаданных транскрипций в базе данных
- Синхронизация транскрипций с видео в интерфейсе воспроизведения

### Работа с файлами

- Загрузка через компонент на странице /upload/
- Обработка загрузки через API-маршрут /api/upload/
- Управление файлами через API-маршрут /api/files/
