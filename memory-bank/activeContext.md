# Активный контекст Lingvo Monkeys

## Текущий фокус работы

На данный момент, проект Lingvo Monkeys находится в активной разработке с фокусом на следующих аспектах:

1. **Улучшение системы аналитики** - внедрение подробного отслеживания пользовательских действий для сбора данных и анализа использования платформы
2. **Расширение пользовательского интерфейса** - доработка страниц и компонентов для улучшения пользовательского опыта
3. **Оптимизация работы с видеоконтентом** - улучшение процессов загрузки и обработки видео

## Недавние изменения

- Добавлены новые поля для языков в базу данных (миграция 20240322000000_add_language_fields.sql)
- Реализована архитектура системы аналитики для отслеживания пользовательских действий
- Создан раздел FAQ с компонентами для часто задаваемых вопросов
- Улучшены компоненты посадочной страницы (LandingPage)

## Следующие шаги

1. **Расширение аналитической функциональности**:

   - Реализация дашбордов для визуализации данных
   - Внедрение событийной аналитики во все ключевые компоненты

2. **Улучшение пользовательского интерфейса**:

   - Доработка адаптивного дизайна для всех страниц
   - Оптимизация интерфейса воспроизведения видео

3. **Расширение функциональности транскрипции**:
   - Улучшение точности транскрибации
   - Добавление поддержки большего количества языков

## Активные решения и соображения

- **Выбор архитектуры аналитики**:
  Принято решение использовать таблицы UserAction, UserSession, FilePlaybackStats для гранулярного хранения данных о действиях пользователей с возможностью последующей агрегации.

- **Модель хранения файлов**:
  Файлы хранятся в Supabase Storage, а метаданные и транскрипции в базе данных PostgreSQL, что обеспечивает эффективное управление контентом.

- **Подход к аутентификации**:
  Используется встроенная система аутентификации Supabase с кастомными компонентами для форм входа/регистрации и middleware для защиты маршрутов.

## Важные паттерны и предпочтения

- **Организация роутинга**:
  Использование группировки маршрутов по типу макета через директории (withFooter)/(noFooter).

- **Компонентный подход**:
  Предпочтение отдаётся композиции небольших, переиспользуемых компонентов вместо крупных монолитных.

- **Управление состоянием**:
  Использование React хуков для инкапсуляции логики работы с данными и состоянием.

- **Стилизация**:
  Предпочтение Tailwind CSS для стилизации компонентов с использованием утилитарных классов.

- **Типизация**:
  Строгая типизация с использованием TypeScript для всех компонентов и функций.

## Инсайты и обучение

- Интеграция аналитики требует баланса между детализацией данных и производительностью/объёмом хранения.
- Эффективное использование Server Components в Next.js позволяет оптимизировать производительность приложения.
- Организация кода по функциональным модулям улучшает поддерживаемость проекта в долгосрочной перспективе.
- Использование RLS (Row Level Security) в Supabase позволяет эффективно управлять доступом к данным на уровне базы данных.
